#!/usr/bin/env sh

echo "ğŸš€ Running pre-push checks..."

# Check if we're on main branch
current_branch=$(git rev-parse --abbrev-ref HEAD)
if [ "$current_branch" = "main" ]; then
    echo "âš ï¸  Pushing to main branch - running comprehensive checks..."
    
    # Run build to ensure everything compiles
    echo "ğŸ—ï¸  Building project..."
    npm run build
    
    # Run full test suite
    echo "ğŸ§ª Running full test suite..."
    npm run test
    
    # Additional security checks could go here
    echo "ğŸ”’ Running security checks..."
    # npm audit --audit-level=moderate
fi

echo "âœ… Pre-push checks completed successfully!"